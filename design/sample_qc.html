{% extends "base.html" %}

<!-- Example row of columns -->
{% block stuff %}

<div class="fluid-row">
  <h2>{{ sample }}</h2>
</div>
<div class="fluid-row" id="sample_summary">
  <h3>Summary</h3>
  <table class="table table-bordered" id="summary_table">
    <thead>
      <tr>
        <th>Flowcell id</th>
        <th>Lane</th>
        <th>Sequence</th>
      </tr>
    </thead>
    <tbody><tr></tr></tbody>
  </table>
</div>

<div class="fluid-row" id="sample_qc">
  <h3>QC</h3>
  <table class="table table-bordered zebra-striped" id="qc_table">
    <tbody>
    </tbody>
  </table>
</div>

<script>
$.getJSON("/api/v1/sample_summary/{{ sample }}", function(data) {
  $("#summary_table tr:last").after("<td>" +
    data["flowcell_id"] + "</td><td>" +
    data["lane"] + "</td><td>" +
    data["sequence"] + "</td>"
  )
})

$.getJSON("/api/v1/qc/{{ sample }}", function(data) {
  $("#qc_table tbody").append(
    "<tr><th>Total</th><td>" + data["bc_count"] + "</td></tr>" +
    "<tr><th>Aligned</th><td>" + data["pct_aligned"] + "</td></tr>" +
    "<tr><th>Pair duplicates</th><td>" + data["pair_duplicates"] + "</td></tr>" +
    "<tr><th>Insert size</th><td>" + data["insert_size"] + "</td></tr>" +
    "<tr><th>On target bases</th><td>" + data["on_target"] + "</td></tr>" +
    "<tr><th>Mean target coverage</th><td>" + data["mean_target_coverage"] + "</td></tr>" +
    "<tr><th>X10x coverage targets</th><td>" + data["x10x_coverage_targets"] + "</td></tr>" +
    "<tr><th>Zero coverage targets</th><td>" + data["zero_coverage_targets"] + "</td></tr>"
  )
})
</script>

{% end %}

